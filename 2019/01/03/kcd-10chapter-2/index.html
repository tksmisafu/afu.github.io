<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>CD-第十章節心得-2 | FuFu IO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="第十章節：提示與技巧提示與技巧 P.271 ~常常～部署團隊去部署不熟悉的系統或服務，就是產生不愉快經驗的開始。因此～讓真正執行部署的人，應該參與部署流程的建立。從頭建立團隊情感。部署的流程文件，也就可以從頭開始建立、修正、驗證，達到正確有效率的部署基礎。 記錄部署活動如果軟體開發出的自動化部署，記錄那些環境因素、套件需求、檔案與目錄權限是非常重要的。部署後日誌、部署清單也是必要留下的。 不要刪除">
<meta name="keywords" content="CD">
<meta property="og:type" content="article">
<meta property="og:title" content="CD-第十章節心得-2">
<meta property="og:url" content="http://tksmisafu.github.io/2019/01/03/kcd-10chapter-2/index.html">
<meta property="og:site_name" content="FuFu IO">
<meta property="og:description" content="第十章節：提示與技巧提示與技巧 P.271 ~常常～部署團隊去部署不熟悉的系統或服務，就是產生不愉快經驗的開始。因此～讓真正執行部署的人，應該參與部署流程的建立。從頭建立團隊情感。部署的流程文件，也就可以從頭開始建立、修正、驗證，達到正確有效率的部署基礎。 記錄部署活動如果軟體開發出的自動化部署，記錄那些環境因素、套件需求、檔案與目錄權限是非常重要的。部署後日誌、部署清單也是必要留下的。 不要刪除">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-01-03T09:55:33.150Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CD-第十章節心得-2">
<meta name="twitter:description" content="第十章節：提示與技巧提示與技巧 P.271 ~常常～部署團隊去部署不熟悉的系統或服務，就是產生不愉快經驗的開始。因此～讓真正執行部署的人，應該參與部署流程的建立。從頭建立團隊情感。部署的流程文件，也就可以從頭開始建立、修正、驗證，達到正確有效率的部署基礎。 記錄部署活動如果軟體開發出的自動化部署，記錄那些環境因素、套件需求、檔案與目錄權限是非常重要的。部署後日誌、部署清單也是必要留下的。 不要刪除">
  
    <link rel="alternate" href="/atom.xml" title="FuFu IO" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">FuFu IO</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tksmisafu.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-kcd-10chapter-2" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/03/kcd-10chapter-2/" class="article-date">
  <time datetime="2019-01-03T09:55:33.000Z" itemprop="datePublished">2019-01-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CD-第十章節心得-2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div id="toc" class="toc-article">
          <strong class="toc-title">[文章目录]</strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第十章節：提示與技巧"><span class="toc-text">第十章節：提示與技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#提示與技巧-P-271"><span class="toc-text">提示與技巧 P.271 ~</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#記錄部署活動"><span class="toc-text">記錄部署活動</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要刪除舊擋，而是移動到別的位置"><span class="toc-text">不要刪除舊擋，而是移動到別的位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部署是整個團隊的責任"><span class="toc-text">部署是整個團隊的責任</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#伺服器應用程式不應該有GUI"><span class="toc-text">伺服器應用程式不應該有GUI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#為新部署預留熱期"><span class="toc-text">為新部署預留熱期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#快速失敗"><span class="toc-text">快速失敗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不要直接對生產環境進行修改"><span class="toc-text">不要直接對生產環境進行修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小結"><span class="toc-text">小結</span></a></li></ol>
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#第十章節：提示與技巧"><span class="post-toc-number">1.</span> <span class="post-toc-text">第十章節：提示與技巧</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#提示與技巧-P-271"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">提示與技巧 P.271 ~</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#記錄部署活動"><span class="post-toc-number">1.0.2.</span> <span class="post-toc-text">記錄部署活動</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不要刪除舊擋，而是移動到別的位置"><span class="post-toc-number">1.0.3.</span> <span class="post-toc-text">不要刪除舊擋，而是移動到別的位置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#部署是整個團隊的責任"><span class="post-toc-number">1.0.4.</span> <span class="post-toc-text">部署是整個團隊的責任</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#伺服器應用程式不應該有GUI"><span class="post-toc-number">1.0.5.</span> <span class="post-toc-text">伺服器應用程式不應該有GUI</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#為新部署預留熱期"><span class="post-toc-number">1.0.6.</span> <span class="post-toc-text">為新部署預留熱期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#快速失敗"><span class="post-toc-number">1.0.7.</span> <span class="post-toc-text">快速失敗</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不要直接對生產環境進行修改"><span class="post-toc-number">1.0.8.</span> <span class="post-toc-text">不要直接對生產環境進行修改</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#小結"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">小結</span></a></li></ol>
        </div>
        <h1 id="第十章節：提示與技巧"><a href="#第十章節：提示與技巧" class="headerlink" title="第十章節：提示與技巧"></a>第十章節：提示與技巧</h1><h3 id="提示與技巧-P-271"><a href="#提示與技巧-P-271" class="headerlink" title="提示與技巧 P.271 ~"></a>提示與技巧 P.271 ~</h3><p>常常～部署團隊去部署不熟悉的系統或服務，就是產生不愉快經驗的開始。<br>因此～讓真正執行部署的人，應該參與部署流程的建立。從頭建立團隊情感。<br>部署的流程文件，也就可以從頭開始建立、修正、驗證，達到正確有效率的部署基礎。</p>
<h3 id="記錄部署活動"><a href="#記錄部署活動" class="headerlink" title="記錄部署活動"></a>記錄部署活動</h3><p>如果軟體開發出的自動化部署，記錄那些環境因素、套件需求、檔案與目錄權限是非常重要的。<br>部署後日誌、部署清單也是必要留下的。</p>
<h3 id="不要刪除舊擋，而是移動到別的位置"><a href="#不要刪除舊擋，而是移動到別的位置" class="headerlink" title="不要刪除舊擋，而是移動到別的位置"></a>不要刪除舊擋，而是移動到別的位置</h3><p>如前一篇提到：<strong><code>應該要保留一份舊版本的副本區</code></strong>～相同的基本原則，還沒升級、部署完成之前，務必留下後路，不要置於自己不義的情況下。<br>UNIX環境中最佳實踐：把應用程式每個版本部署到單獨的目錄中，再透過軟連結來指向目標版本。<br>如此，版本的切換(還原)變得更加容易。</p>
<h3 id="部署是整個團隊的責任"><a href="#部署是整個團隊的責任" class="headerlink" title="部署是整個團隊的責任"></a>部署是整個團隊的責任</h3><p>團隊中的每個成員都應該知道如何部署，及如何維護部署腳本。藉由每次部署工作都使用相同且真正的部署腳本(公版概念)。</p>
<h3 id="伺服器應用程式不應該有GUI"><a href="#伺服器應用程式不應該有GUI" class="headerlink" title="伺服器應用程式不應該有GUI"></a>伺服器應用程式不應該有GUI</h3><blockquote><p>反差：這叫 Windows 情何以堪～</p>
</blockquote>
<p>書中這麼下標題，其說法是：過去GUI類型應用程式，設置資訊沒有腳本化、應用程式位於哪個目錄非常敏感。<br>其主要原因是不少應用程式依賴著使用者登入狀態情境下，才能啟動應用程式。</p>
<h3 id="為新部署預留熱期"><a href="#為新部署預留熱期" class="headerlink" title="為新部署預留熱期"></a>為新部署預留熱期</h3><p>當網站在官方發布時，就應該已經執行了一段時間，足以讓應用程式的伺服器和資料庫建立好他們的緩存，準備好全部的連線，完成了預熱階段。</p>
<blockquote><p>謎之音：系統需要預熱我第一次聽到，CDN 系統中的快取需要預熱預存，倒是很常見。</p>
</blockquote>
<p>書中提到，那隻鳥～利用金絲雀發佈，算是達到預熱的目標。<br>新伺服器服務經過一小部分的請求後，確認無誤證明了沒有異常，方可持續切換線上流量到新系統上。</p>
<h3 id="快速失敗"><a href="#快速失敗" class="headerlink" title="快速失敗"></a>快速失敗</h3><p>部署腳本，應該也要納入測試計畫中～<br>為了確保部署順利，這些測試應該被當作部署的驗證一環；理想下，當遇到問題，就應該立即停止。</p>
<h3 id="不要直接對生產環境進行修改"><a href="#不要直接對生產環境進行修改" class="headerlink" title="不要直接對生產環境進行修改"></a>不要直接對生產環境進行修改</h3><p>前面章節，都有提到版控的重要性，非常不建議在線上生產環境中進行任何的修改。<br>生產環境裡當被定義為「鎖定」概念，不會因未受控制的修改，讓系統呈現不穩定、未知的風險階段。<br>如此的限制，才能促進走向「<strong>持續部署</strong>」的光明大道。</p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><ul>
<li>部署流水線的幾個階段，比較常關注測試環境與生產環境的部署。</li>
<li>這些階段的差別在於一定要有自動化測試階段，只有測試許可與正確，部署流水線就應該能夠透過「點擊按鈕」進行後續部署階段。</li>
<li>部署的歷程，應該能夠讓團隊明確看出哪個版本被部署到哪個環境中。版本差異的透明度也需要。</li>
<li>降低部署失敗風險，最佳方式就是落實持續發佈，每當有版本修訂，就該照流程完成部署到個階段測試環境中。</li>
<li>頻繁的部署，越能縮小“有問題”的範圍，持續部署任務就越趨近100%成功。</li>
<li>部署流程應該在最開始就實現與進行，並且持續迭代的改善流程。不應該在接近最後重要時刻才想到部署流程。</li>
<li>只要參與開發、業務、測試、DBA、支援、維運等等團隊，這些人需要持續交流、合作，共同促使交付公司產品服務更有效率。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tksmisafu.github.io/2019/01/03/kcd-10chapter-2/" data-id="cjqyuv98a00083nxh4jq71d3z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CD/">CD</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/01/14/centos7-install-k8s/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CentOS 7 上安裝 K8s 自家練習環境
        
      </div>
    </a>
  
  
    <a href="/2019/01/03/kcd-10chapter-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">CD-第十章節心得-1</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CD/">CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8s/">K8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service-discovery/">service_discovery</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CD/" style="font-size: 20px;">CD</a> <a href="/tags/K8s/" style="font-size: 20px;">K8s</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/service-discovery/" style="font-size: 20px;">service_discovery</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/15/k8s-service-1/">K8s Service 介紹</a>
          </li>
        
          <li>
            <a href="/2019/01/14/centos7-install-k8s/">CentOS 7 上安裝 K8s 自家練習環境</a>
          </li>
        
          <li>
            <a href="/2019/01/03/kcd-10chapter-2/">CD-第十章節心得-2</a>
          </li>
        
          <li>
            <a href="/2019/01/03/kcd-10chapter-1/">CD-第十章節心得-1</a>
          </li>
        
          <li>
            <a href="/2019/01/02/docker-0102/">用 docker 架設 php 平台</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>